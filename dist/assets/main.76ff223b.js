import{i as d,p as o,r,a as c}from"./toastify.f6c591f2.js";import{l as m,d as h,r as p}from"./vendor.423aa499.js";import{t as u}from"./toast.68c049d4.js";function g({elementId:t,defaultParams:a,onChange:e}){const s=document.getElementById(t);a.get("title_like")&&(s.value=a.get("title_like"));const i=m(l=>e==null?void 0:e(l.target.value),500);s.addEventListener("input",i)}h.extend(p);async function n(t,a){try{const e=new URL(window.location);t==="title_like"&&e.searchParams.set("_page",1),t&&e.searchParams.set(t,a),history.pushState({},"",e);const{data:s,pagination:i}=await o.getAll(e.searchParams);r(s),c("pagination",i)}catch(e){console.log("fail to load new post",e)}}function f(){document.addEventListener("post-delete",t=>{const a=t.detail.post,e=t.detail.myModal,s=document.querySelector("#confirm-delete");s&&s.addEventListener("click",async()=>{try{await o.remove(a.id),u.success("Delete post successfully!!!"),e.hide(),n()}catch{e.hide()}})})}(async()=>{try{const t=new URL(window.location);t.searchParams.get("_page")||t.searchParams.set("_page",1),t.searchParams.get("_limit")||t.searchParams.set("_limit",6),history.pushState({},"",t);const a=t.searchParams;d({elementId:"pagination",defaultParams:a,onChange:i=>n("_page",i)}),g({elementId:"searchInput",defaultParams:a,onChange:i=>n("title_like",i)}),f();const{data:e,pagination:s}=await o.getAll(a);r(e),c("pagination",s)}catch{}})();
